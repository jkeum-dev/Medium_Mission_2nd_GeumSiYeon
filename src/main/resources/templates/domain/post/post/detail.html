<html layout:decorate="~{global/usrLayout}">

<head>
  <title th:text="|글 ${post.id}번|"></title>
</head>

<body>

<div layout:fragment="content">
  <h1>글 내용</h1>

  <!-- 유료 멤버십 전용 게시글이고, 현재 사용자가 유료 멤버가 아닐 경우 -->
  <div th:if="${post.paid and !@rq.member.isPaid}">
    <p>이 글은 유료멤버십전용 입니다.</p>
  </div>

  <!-- 유료 멤버십 전용이 아니거나, 현재 사용자가 유료 멤버일 경우 -->
  <div th:unless="${post.paid and !@rq.member.isPaid}">
    <div>
      <h3>공개여부</h3>
      <div th:text="${post.published ? '공개' : '비공개'}"></div>
    </div>

    <div>
      <h3>제목</h3>
      <div th:text="${post.title}"></div>
    </div>

    <div>
      <h3>내용</h3>
      <div style="white-space: pre-wrap;" th:text="${post.body}"></div>
    </div>

  <hr>

  <div>
    <button onclick="history.back();">뒤로가기</button>
    <a th:if="${@postService.canModify(@rq.member, post)}" th:href="|/post/${post.id}/modify|">글 수정</a>

    <form style="display: contents"
          th:if="${@postService.canDelete(@rq.member, post)}"
          th:action="|/post/${post.id}/delete|"
          method="POST"
    >
      <input type="hidden" name="_method" value="DELETE">
      <button onclick="return confirm('정말로 삭제하시겠습니까?');">글 삭제</button>
    </form>

    <a
            th:if="${@postService.canDelete(@rq.member, post)}"
            th:href="|/post/${post.id}/delete|"
            method="DELETE"
            onclick="return confirm('정말로 삭제하시겠습니까?');"
    >
      글 삭제
    </a>
  </div>
</div>

</body>

</html>